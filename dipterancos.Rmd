---
title: "antncos"
author: "Zach Brown"
date: "February 26, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

1. Load packages
```{r}
library(tidyverse)
library(RColorBrewer)
library(forcats)
library(lubridate)
library(dbplyr)
```

2. load and wrangle data
```{r}
allsbcoants<- read_csv("newsbcoants.csv")


#make df way less obnoxious
antssimple <-allsbcoants %>%
#selecting columns to keep for data analysis
  select(
    order, family, scientificName, year, month, eventDate, verbatimEventDate, samplingProtocol, habitat, country, stateProvince, county, municipality, decimalLatitude, decimalLongitude, recordedBy, individualCount)%>%
#changing months from numerical value to actual name
  mutate(
    monthname = case_when(
      month == 1 ~ "January",
      month == 2 ~ "February",
      month == 3 ~ "March",
      month == 4 ~ "April",
      month == 5 ~ "May",
      month == 6 ~ "June",
      month == 7 ~ "July"
    )
  ) %>%
#trying to order months chronologically, still not working
  mutate(order(monthname, na.last = TRUE, decreasing = FALSE,
      method = c("auto", "shell", "radix")))%>%
#combining trap types
  mutate(
    samplingProtocolname = case_when(
      samplingProtocol == "Pitfall" ~ "Pitfall Trap",
      samplingProtocol == "Pitfall trap" ~ "Pitfall Trap"))

#trying to sum individual count
sum(antssimple, individualCount)

antsncos<-antssimple %>%
#excluded anything that doesnt have UCSB Arthropod Survey
  filter(recordedBy =="UCSB Arthropod Survey")%>%
#exluded anything that doesn't have a genera determination
  filter(scientificName !="Formicidae")
```

3. data exploration
```{r}
#this graph looks nice, needs actual count of L. humile

scinameabund<- ggplot(mutate
                     (antsncos, scientificName = fct_infreq(scientificName))) + 
  geom_bar(
    aes(x = scientificName, fill= scientificName)
    ) +
  labs(x="Scientific Name", y="Number of specimens collected", title = "Ant Abundance Before Restoration") +
  theme(axis.title.x=element_blank(),
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank()
        )

scinameabund
########################################################################################
#this graph looks nice, needs to be updated with actual counts for L. humile

traptype <- scinameabund + facet_wrap(~samplingProtocol) +labs(title = "Ants by Sampling Protocol")
traptype

########################################################################################
#months need to be ordered chronologically

yearant <- scinameabund + facet_wrap(~monthname) + labs(title = "Ants by Month")
yearant

#######################################################################################
#Habitats need to be condensed

habant <- scinameabund + facet_wrap(~habitat) + labs(title = "Ant abundance by habitat")
habant
```

